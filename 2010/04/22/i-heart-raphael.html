<!DOCTYPE html>
<html>
<head>
  <title>I &lt;3 Raphael</title>
  <link href="http://feeds.feedburner.com/trottercashion" rel="alternate" title="Trotter Cashion" type="application/atom+xml" />
  <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen">
  <link rel="stylesheet" href="/css/application.css" type="text/css" media="screen">
  <meta name="bitly-verification" content="04b77a0a381e"/>
</head>
<body>
  <div class="header">
    <h2><a href="/">Trotter Cashion</a></h2>
  </div>
  <div class="content">
    <div id="post">
  <h1>I &lt;3 Raphael</h1>
<p class="meta">April 22, 2010 &#8211; Philly</p>
<p>I know all the hype these days is around HTML5&#8217;s canvas, but can I talk up <span class="caps">SVG</span> for a sec? That shit rocks. Here at <a href="http://hoopla.net">Hoopla</a>, we have a number of info graphics on our site like charts and bar graphs and whatnot. They need to be generated on the fly using data from our database. As we saw it, we had two options: flash or javascript. Flash was a no-go, because it would be one more thing for developers on the team to know. Canvas was out on account of its lack of support in IE. <span class="caps">SVG</span> on the other hand&#8230; well, <a href="http://raphaeljs.com/">Raphael</a> (a kickass javascript library) gives cross browser <span class="caps">SVG</span> support that works all the way back to IE6. Total Win!</p>
<p>As an added benefit, it turns out that Raphael is crazy easy to work with. Let&#8217;s have a look at a small example (be sure to hover over the square):</p>
<div id="draw-here-raphael" style="height: 200px; width: 400px; background: #666;">
</div>
<script type="text/javascript" src="/javascripts/jquery-1.4.2.min.js"></script><script type="text/javascript" src="/javascripts/raphael-1.3.2-min.js"></script><script type="text/javascript">
  var r = new Raphael("draw-here-raphael", 400, 200),
      position = 'left',
      rect = r.rect(20, 20, 50, 50).attr({"fill": "#fbb"});
  
  $(rect.node).mouseover(function () {
    if (position === 'left') {
      rect.animate({x: 300, y: 100}, 400, "<>");
      position = 'right';
    } else {
      rect.animate({x: 20, y: 20 }, 800, "bounce");
      position = 'left';
    }
  });

  setInterval(function () {
    rect.rotate(1);
  }, 10);
</script><p>Pretty cool, right? All that was accomplished with this little bit of js:</p>
<div class="highlight"><pre><code class="js">    <span class="c1">// Make a raphael</span>
<span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Raphael</span><span class="p">(</span><span class="s2">&quot;draw-here-raphael&quot;</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>

    <span class="c1">// Store where the box is</span>
    <span class="nx">position</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>

    <span class="c1">// Make our pink rectangle</span>
    <span class="nx">rect</span> <span class="o">=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">).</span><span class="nx">attr</span><span class="p">({</span><span class="s2">&quot;fill&quot;</span><span class="o">:</span> <span class="s2">&quot;#fbb&quot;</span><span class="p">});</span>

<span class="c1">// Note JQuery is adding the mouseover. SVG == html nodes</span>
<span class="nx">$</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">node</span><span class="p">).</span><span class="nx">mouseover</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">===</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="nx">x</span><span class="o">:</span> <span class="mi">300</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">100</span><span class="p">},</span> <span class="mi">400</span><span class="p">,</span> <span class="s2">&quot;&lt;&gt;&quot;</span><span class="p">);</span>
    <span class="nx">position</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="nx">x</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">20</span> <span class="p">},</span> <span class="mi">800</span><span class="p">,</span> <span class="s2">&quot;bounce&quot;</span><span class="p">);</span>
    <span class="nx">position</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Make that sucker rotate</span>
<span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">rect</span><span class="p">.</span><span class="nx">rotate</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">10</span><span class="p">);</span>
</code></pre>
</div>
<p>Definitely take note of the fact that <a href="http://jquery.com">jQuery</a> can be used to manipulate the svg nodes. That&#8217;s been very helpful to us when adding hovers and other cool effects.</p>
<p>If you want to get started with Raphael, have a look at their <a href="http://raphaeljs.com/reference.html">documentation</a> for all the functions available. I highly recommend it as an easy to use, cross platform drawing library. Hell, it even runs on the iPad and iPhone :-)</p>
<p><strong>Update:</strong> I&#8217;ve written a <a href="/2010/04/27/headless-raphael-testing.html">follow-up post</a> that shows how to unit test Raphael libraries.</p>

  <div id="related">
    <h3>Related Posts</h3>
    <ul class="posts">
      
      <li><span>27 Apr 2010</span> &raquo; <a href="/2010/04/27/headless-raphael-testing.html">Headless Raphael Testing</a></li>
      
      <li><span>08 Feb 2011</span> &raquo; <a href="/2011/02/08/rubys-define_method-method_missing-and-instance_eval.html">Ruby's define_method, method_missing, and instance_eval</a></li>
      
      <li><span>26 Sep 2010</span> &raquo; <a href="/2010/09/26/mashion.html">Starting a Company</a></li>
      
    </ul>
  </div>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /**
      * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
      */
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'http://trottercashion.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=trottercashion">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

  </div>
  <div class="footer">
    <ul class="about">
      <li>Trotter Cashion</li>
      <li>Co-founder of <a href="http://mashion.net">Mashion</a></li>
      <li>cashion@gmail.com</li>
    </ul>
    <ul class="contact">
      <li><a href="http://github.com/trotter">github.com/trotter</a></li>
      <li><a href="http://twitter.com/cashion">twitter.com/cashion</a></li>
      <li><a href="http://speakerrate.com/trotter">speakerrate.com/trotter</a></li>
    </ul>
    <p>
      <a href="http://feeds.feedburner.com/trottercashion" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon32x32.png" alt="" style="vertical-align:middle;border:0"/></a>
    </p>
    <br class="clearing" />
    
  </div>

  <!-- google analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3670698-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

  <!-- get clicky -->
  <script type="text/javascript">
  var clicky = { log: function(){ return; }, goal: function(){ return; }};
  var clicky_site_id = 210101;
  (function() {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = ( document.location.protocol == 'https:' ? 'https://static.getclicky.com' : 'http://static.getclicky.com' ) + '/js';
    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
  })();
  </script>
  <a title="Web Analytics" href="http://getclicky.com/210101"></a>
  <noscript><p><img alt="Clicky" width="1" height="1" src="http://in.getclicky.com/210101ns.gif" /></p></noscript>
</body>
</html>
