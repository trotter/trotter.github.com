<!DOCTYPE html>
<html>
<head>
  <title>Logrotate For Rails</title>
  <link href="http://feeds.feedburner.com/trottercashion" rel="alternate" title="Trotter Cashion" type="application/atom+xml" />
  <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen">
  <link rel="stylesheet" href="/css/application.css" type="text/css" media="screen">
  <meta name="bitly-verification" content="04b77a0a381e"/>
</head>
<body>
  <div class="header">
    <h2><a href="/">Trotter Cashion</a></h2>
  </div>
  <div class="content">
    <div id="post">
  <h1>Logrotate For Rails</h1>
<p class="meta">April 21, 2010 &#8211; Philly</p>
<p><a href="http://matschaffer.com">Mat</a> and I have been setting up a beta server recently and decided that we should actually rotate our logs. Thankfully, Mat knew enough about <a href="http://linux.die.net/man/8/logrotate">logrotate</a>. Since I didn&#8217;t know jack about logrotate before yesterday, I figure it&#8217;s probably worth explaining to you as well. So without further ado, here&#8217;s our logrotate conf for our rails app:</p>
<pre><code>/srv/our_app/current/log/*.log {
  daily          # rotate daily
  rotate 12      # keep twelve copies
  compress       # gzip the old files
  missingok      # don't barf if there is no log
  copytruncate
}</code></pre>
<p>The first line tells logrotate where our logs are. The last line tells logrotate to copy the log file then truncate the existing file in place. This is important because rails isn&#8217;t down with flipping the file handle (we think).</p>
<p>On a unixy system, place the above text in a file called <code>our_app</code> in the <code>/etc/logrotate.d</code> directory. Then make it owned by <code>root</code>. Logrotate will now rotate your rails logs each night.</p>
<p>Neat!</p>

  <div id="related">
    <h3>Related Posts</h3>
    <ul class="posts">
      
      <li><span>11 Apr 2011</span> &raquo; <a href="/2011/04/11/use-git-plumbing-for-more-awesome-github-pages.html">Use Git Plumbing For More Awesome Github Pages</a></li>
      
      <li><span>27 Apr 2010</span> &raquo; <a href="/2010/04/27/headless-raphael-testing.html">Headless Raphael Testing</a></li>
      
      <li><span>12 Aug 2012</span> &raquo; <a href="/2012/08/12/how-to-write-good-log-messages.html">How To Write Good Log Messages</a></li>
      
    </ul>
  </div>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /**
      * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
      */
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'http://trottercashion.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=trottercashion">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

  </div>
  <div class="footer">
    <ul class="about">
      <li>Trotter Cashion</li>
      <li>Co-founder of <a href="http://mashion.net">Mashion</a></li>
      <li>cashion@gmail.com</li>
    </ul>
    <ul class="contact">
      <li><a href="http://github.com/trotter">github.com/trotter</a></li>
      <li><a href="http://twitter.com/cashion">twitter.com/cashion</a></li>
      <li><a href="http://speakerrate.com/trotter">speakerrate.com/trotter</a></li>
    </ul>
    <p>
      <a href="http://feeds.feedburner.com/trottercashion" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon32x32.png" alt="" style="vertical-align:middle;border:0"/></a>
    </p>
    <br class="clearing" />
    
  </div>

  <!-- google analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3670698-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

  <!-- get clicky -->
  <script type="text/javascript">
  var clicky = { log: function(){ return; }, goal: function(){ return; }};
  var clicky_site_id = 210101;
  (function() {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = ( document.location.protocol == 'https:' ? 'https://static.getclicky.com' : 'http://static.getclicky.com' ) + '/js';
    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
  })();
  </script>
  <a title="Web Analytics" href="http://getclicky.com/210101"></a>
  <noscript><p><img alt="Clicky" width="1" height="1" src="http://in.getclicky.com/210101ns.gif" /></p></noscript>
</body>
</html>
